<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tekton - Configure Docker Registry Credentials :: Learning-Kabanero-101</title>
    <link rel="canonical" href="https://github.com/ibm-cloud-architecture/Learning-Kabanero-101/web/1.0.0/tekton-credentials-docker.html">
    <meta name="generator" content="Antora 2.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <p>Learning Kabanero 101</p>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="web" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="kabanero-overview.html">Learning Kabanero 101</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kabanero-overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Workflows</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="e2e-java-spring-boot2.html">E2E Java Spring Boot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="e2e-java-microprofile.html">E2E Java Liberty Microprofile</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="e2e-nodejs-express.html">E2E Node.js Express</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="codewind-setup-appsody.html">Configure CodeWind</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appsody-extend-stack.html">Extend Appsody Stack</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tekton-create-pipeline.html">Extend Tekton Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tekton-credentials-github.html">Configure Github Credentials</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="tekton-credentials-docker.html">Configure Docker Credentials</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">External Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://github.com/henrynash/apposody-stack-creation/blob/master/stack-creation.md" target="_blank" rel="noopener">Create Appsody Stack ↗</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://github.com/gcharters/kabanero-dev-getting-started" target="_blank" rel="noopener">Java MicroProfile Tutorial ↗</a></span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="references.html">References</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Learning Kabanero 101</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Learning Kabanero 101</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="kabanero-overview.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="kabanero-overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="kabanero-overview.html">Learning Kabanero 101</a></li>
    <li>Tasks</li>
    <li><a href="tekton-credentials-docker.html">Configure Docker Credentials</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/ibm-cloud-architecture/Learning-Kabanero-101/edit/master/modules/ROOT/pages/tekton-credentials-docker.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1 class="page">Tekton - Configure Docker Registry Credentials</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_ibm_container_registry">IBM Container Registry</a></li>
<li><a href="#_creating_pipeline_in_tekton">Creating pipeline in Tekton</a></li>
<li><a href="#_access_ibm_container_registry_from_tekton">Access IBM Container Registry from Tekton</a>
<ul class="sectlevel2">
<li><a href="#_create_a_secret">Create a secret</a></li>
<li><a href="#_annotate_the_secret">Annotate the secret.</a></li>
<li><a href="#_configuring_service_account_with_secret">Configuring Service Account with Secret</a></li>
</ul>
</li>
<li><a href="#_allow_pods_to_use_the_external_registry_images">Allow pods to use the external registry images</a></li>
<li><a href="#_create_a_webhook_in_tekton">Create a webhook in Tekton</a></li>
<li><a href="#_verify_the_pipeline">Verify the pipeline</a></li>
<li><a href="#_verify_the_app">Verify the app</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://cloud.ibm.com/kubernetes/catalog/openshiftcluster">Openshift Cluster</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.ibm.com/support/knowledgecenter/en/SSCSJL/install-icpa-cli.html">Kabenero Enterprise (Installed with IBM Cloud Pak for Applications)</a></p>
<div class="ulist">
<ul>
<li>
<p>Tekton Operator and Tekton Dashboard</p>
</li>
<li>
<p>Knative Operator</p>
</li>
</ul>
</div>
</li>
<li>
<p>Install Appsody Operator that watches on all namespaces <a href="https://github.com/appsody/appsody-operator/tree/master/deploy/releases/0.1.0" class="bare">https://github.com/appsody/appsody-operator/tree/master/deploy/releases/0.1.0</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Docker for Desktop - <a href="https://docs.docker.com/docker-for-mac/install/">Mac</a>, <a href="https://docs.docker.com/docker-for-windows/install/">Windows</a></p>
</li>
<li>
<p>The following command line (CLI) tools and configured:</p>
<div class="ulist">
<ul>
<li>
<p>docker - It comes with the Docker for Desktop installation.</p>
</li>
<li>
<p><a href="https://www.okd.io/download.html">oc</a></p>
</li>
<li>
<p><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a></p>
</li>
<li>
<p><a href="https://appsody.dev/docs/getting-started/installation">appsody</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://cloud.ibm.com/docs/containers?topic=containers-cs_cli_install">IBM Cloud CLI</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ibm_container_registry"><a class="anchor" href="#_ibm_container_registry"></a>IBM Container Registry</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Install container registry plug in.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud plugin install container-registry -r 'IBM Cloud'</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Login into your IBM cloud account.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud login -a https://cloud.ibm.com</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have a federated ID, use <code>ibmcloud login --sso</code> to log in to the IBM Cloud CLI.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Target the region.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud cr region-set &lt;region_name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For instance, we used</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud cr region-set us-south</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a namespace.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud cr namespace-add &lt;my_namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For instance, we used</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud cr namespace-add kabanero_samples</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once created, you will see something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ibmcloud cr namespace-add kabanero_samples
Adding namespace 'kabanero_samples'...

Successfully added namespace 'kabanero_samples'

OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_pipeline_in_tekton"><a class="anchor" href="#_creating_pipeline_in_tekton"></a>Creating pipeline in Tekton</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Create a sample Nodejs express sample appsody application - Refer <a href="e2e-nodejs-express.html#_create_a_new_application" class="page">Create a new appsody nodejs express application</a>.</p>
</li>
<li>
<p>Push the code to github - Refer <a href="e2e-nodejs-express.html#_deploy_the_appsody_application_on_openshift_for_team_development" class="page">Deploy the appsody application on Openshift</a>.</p>
</li>
<li>
<p>Create a personal access token on github - Refer <a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">Creating a personal access token for the command line</a>.</p>
</li>
<li>
<p>Access tekton dashboard - Refer <a href="e2e-nodejs-express.html#_accessing_tekton_dashboard" class="page">Accessing Tekton dashboard</a>.</p>
</li>
<li>
<p>Create a tekton task - Refer <a href="tekton-create-pipeline.html#_custom_task" class="page">Create a Task</a>.</p>
</li>
<li>
<p>Create a tekton pipeline - Refer <a href="tekton-create-pipeline.html#_custom_pipeline" class="page">Create a Pipeline</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_ibm_container_registry_from_tekton"><a class="anchor" href="#_access_ibm_container_registry_from_tekton"></a>Access IBM Container Registry from Tekton</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before doing this step, make sure the tekton pipeline set up is all done.</p>
</div>
<div class="sect2">
<h3 id="_create_a_secret"><a class="anchor" href="#_create_a_secret"></a>Create a secret</h3>
<div class="paragraph">
<p>To access IBM Cloud container registry, provide the necessary credentials as secret.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Get the api key.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud iam api-key-create tekton -d "tekton" --file tekton.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ibmcloud iam api-key-create tekton -d "tekton" --file tekton.json
Creating API key tekton as &lt;user&gt;@ibm.com...
OK
API key tekton was created
Successfully save API key information to tekton.json</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Find the api key.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat tekton.json | grep apikey</code></pre>
</div>
</div>
<div class="paragraph">
<p>This gives you the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cat tekton.json | grep apikey
	"apikey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create the push secret.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create secret generic ibm-cr-push-secret --type="kubernetes.io/basic-auth" --from-literal=username=iamapikey --from-literal=password=&lt;your-apikey&gt; -n kabanero</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc create secret generic ibm-cr-push-secret --type="kubernetes.io/basic-auth" --from-literal=username=iamapikey --from-literal=password=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -n kabanero
secret/ibm-cr-push-secret created</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_annotate_the_secret"><a class="anchor" href="#_annotate_the_secret"></a>Annotate the secret.</h3>
<div class="paragraph">
<p>Use the below command to annotate the secret.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc annotate secret ibm-cr-push-secret tekton.dev/docker-0=us.icr.io -n kabanero</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return you the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc annotate secret ibm-cr-push-secret tekton.dev/docker-0=us.icr.io -n kabanero
secret/ibm-cr-push-secret annotated</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_service_account_with_secret"><a class="anchor" href="#_configuring_service_account_with_secret"></a>Configuring Service Account with Secret</h3>
<div class="paragraph">
<p>Direct the service account to use this secret.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For this, create a yaml file named <code>serviceaccount.yaml</code> as follows.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: kabanero-operator
secrets:
- name: ibm-cr-push-secret</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Run this command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f serviceaccount.yaml -n kabanero</code></pre>
</div>
</div>
<div class="paragraph">
<p>If it is done successfully, you will see the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc apply -f serviceaccount.yaml -n kabanero
serviceaccount/kabanero-operator configured</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_allow_pods_to_use_the_external_registry_images"><a class="anchor" href="#_allow_pods_to_use_the_external_registry_images"></a>Allow pods to use the external registry images</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Create the docker credentials file for the ibm container registry.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc secrets new-dockercfg &lt;pull_secret_name&gt; \
    --docker-server=&lt;registry_server&gt; --docker-username=&lt;user_name&gt; \
    --docker-password=&lt;password&gt; --docker-email=&lt;email&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will be something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc secrets new-dockercfg external-registry \
&gt; --docker-username=iamapikey \
&gt; --docker-password=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
&gt; --docker-email=user@ibm.com \
&gt; --docker-server=us.icr.io -n kabanero-samples</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Define the below as <code>app_sa.yaml</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The name should be the same as Custom Resource Definition if you did not explicitly mention the service account name in <strong>app-deploy.yaml</strong>. Here, we are using the <code>default</code> one.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: appsody-sample-nodejs-express</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Now, create the service account as follows.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create -f app_sa.yaml -n kabanero-samples</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once created, you will see something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc create -f app_sa.yaml -n kabanero-samples
serviceaccount/appsody-sample-nodejs-express created</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For pulling the images from the container registry, we must add the secret to the service account in order to let the pods use it.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc secrets link &lt;serviceaccount_name&gt; &lt;pull_secret_name&gt; --for=pull -n &lt;namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will be something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc secrets link appsody-sample-nodejs-express external-registry --for=pull -n kabanero-samples</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To use a secret for pushing and pulling build images, the secret must be mountable inside of a pod.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc secrets link builder &lt;pull_secret_name&gt; -n &lt;namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will be something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc secrets link builder external-registry -n kabanero-samples</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_webhook_in_tekton"><a class="anchor" href="#_create_a_webhook_in_tekton"></a>Create a webhook in Tekton</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Access the tekton dashboard and now you should be able to see the pipeline in the list.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_custom_pipeline_tekton_home.png" alt="nodejs custom pipeline tekton home">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure the github webhook to your repo. Go to <code>Webhooks</code> &gt; <code>Add Webhook</code> and then create the webhook.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_custom_pipeline_tekton_webhook.png" alt="nodejs custom pipeline tekton webhook">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To get the ibm cloud region, run the below command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud cr region</code></pre>
</div>
</div>
<div class="paragraph">
<p>This gives you something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ibmcloud cr region
You are targeting region 'us-south', the registry is 'us.icr.io'.

OK</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To get the ibm cloud namespace, run the below command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ibmcloud cr namespace-list</code></pre>
</div>
</div>
<div class="paragraph">
<p>This gives you something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ibmcloud cr namespace-list
Listing namespaces for account 'Cloud Client Engagement Team's Account' in registry 'us.icr.io'...

Namespace
kabanero_samples

OK</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify if it is created successfully.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_custom_pipeline_tekton_webhooks.png" alt="nodejs custom pipeline tekton webhooks">
</div>
</div>
<div class="paragraph">
<p>For more detailed instructions on how to create webhook, refer <a href="e2e-nodejs-express.html#_create_tekton_webhook_for_git_repo" class="page">Create Tekton webhook for git repo</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify_the_pipeline"><a class="anchor" href="#_verify_the_pipeline"></a>Verify the pipeline</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Make any changes to your app and push it to github.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_app_changes.png" alt="nodejs app changes">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>This will trigger the tekton pipleine.</p>
</li>
<li>
<p>Go to the tekton dashboard and access the pipeline we created.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_custom_pipeline_tekton_home.png" alt="nodejs custom pipeline tekton home">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Wait till the task is completed and then click on the Pipeline Run.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_custom_pipeline_tekton_pipeline_run.png" alt="nodejs custom pipeline tekton pipeline run">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Once the tasks are all completed, you will see something like below.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_custom_pipeline_tekton_pipeline_run_tasks.png" alt="nodejs custom pipeline tekton pipeline run tasks">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify_the_app"><a class="anchor" href="#_verify_the_app"></a>Verify the app</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>To get the pods, run the below command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n kabanero-samples</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc get pods -n kabanero-samples
NAME                                            READY     STATUS    RESTARTS   AGE
appsody-sample-nodejs-express-f59f7b468-mctdc   1/1       Running   0          27m</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Wait till your pods are running.</p>
</li>
<li>
<p>Once ready, access the route as follows.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route -n kabanero-samples</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see something like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc get route -n kabanero-samples
NAME                            HOST/PORT                                                                                                                             PATH      SERVICES                        PORT      TERMINATION   WILDCARD
appsody-sample-nodejs-express   appsody-sample-nodejs-express-tekton-samples.csantana-ocp3-fa9ee67c9ab6a7791435450358e564cc-0001.us-east.containers.appdomain.cloud             appsody-sample-nodejs-express   3000                    None</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Access the application at this route.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/nodejs_app_changes_deployed.png" alt="nodejs app changes deployed">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/tektoncd/pipeline/blob/master/docs/auth.md">Tekton pipeline docker authentication</a></p>
</li>
<li>
<p><a href="http://v1.uncontained.io/playbooks/continuous_delivery/external-docker-registry-integration.html#using-images-from-a-secured-registry-as-part-of-a-build">Using secured registries on Openshift</a></p>
</li>
<li>
<p><a href="https://github.com/appsody/appsody-operator/blob/master/doc/user-guide.md">Appsody Operator</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
